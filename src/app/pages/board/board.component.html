<div class="flex flex-col h-screen">
    <app-navbar></app-navbar>
    <div class="h-full bg-blue-600 px-4 pb-4">
        <div class="flex flex-col h-full">
            <div>
                <h2 class="text-xl font-bold text-seasalt my-4">Demo Board</h2>
            </div>
            <div class="flex grow items-start w-full h-full overflow-x-scroll" cdkDropListGroup>
                @for (column of columns; track column; let i = $index) {
                <div class="rounded-xl bg-anti-flash_white min-w-72 h-fit p-2 mr-3">
                    <div class="flex justify-between py-1">
                        <h3 class="font-bold ml-2 text-onyx">{{ column.title }}</h3>
                    </div>
                    @if (column.namingColumnMode) {
                    <input type="text" placeholder="Enter list name..." (keydown.enter)="applyColumnName(i, $event)"
                        class="rounded-xl relative -top-1 p-1 w-full">
                    }
                    <div class="text-sm mt-2 min-h-3" cdkDropList (cdkDropListDropped)="drop($event)"
                        [cdkDropListData]="column.todos">
                        @for (todo of column.todos; track todo; let i = $index) {
                        <div (click)="openDialog()" 
                        cdkDrag
                            class="bg-seasalt shadow p-2 text-fontent rounded-xl mt-2 cursor-pointer hover:outline hover:outline-2 hover:outline-blue-600 overflow-hidden">
                            {{ todo.title }}
                        </div>
                        }
                    </div>
                    @if (!column.namingColumnMode) {
                    <button (click)="addTodo()"
                        class="p-2 w-full text-start rounded-xl mt-2 text-slate_gray font-semibold hover:bg-anti-flash_white">+
                        Add a card</button>
                    } @else {
                    <button
                        class="py-2 mr-6 px-4 w-fit text-center bg-blue-600 rounded-xl text-seasalt font-semibold hover:bg-blue-700">
                        Add list</button>
                    <button>
                        <i class="bi bi-x-lg"></i>
                    </button>
                    }
                </div>
                }
                <button class="min-w-72 text-seasalt bg-blue-500 rounded-xl p-2 font-semibold" (click)="addColumn()">Add another
                    list</button>
            </div>
        </div>
    </div>
</div>